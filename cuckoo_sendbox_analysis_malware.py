import subprocess
# import requests
# def cuckoo(filename):
#     cmd = "cuckoo"
#     returned_value = subprocess.call(cmd, shell=True)
#     # dáº©y file vao sendbox
#     url = "http://localhost:8000/"
#     myFile = open(filename, "rb")
#     r = requests.post(url, files={'file': myFile})
#     r.text.find("The uploaded file has been accepted.")
#     print(r.status_code)
#
#     # get json in id malware
#     url = "http://localhost:8000/analysis/#"
#     requests.get(url).json()
#     requests.get('BODY')
#     # params = dict(
#     # origin='Chicago,IL',
#     # )
#     # get json malware
#     list = []
#     ls = ["summary", "static", "extracted", "behavior", "network", "dropped_files","dropped_buffers"]
#     for i in ls:
#         url1 = "http://localhost:8000/analysis/" + id + "/" + i + "/"
#         list.append(requests.get(url1).json())
#     return list


import subprocess
def cuckoo(filename):
    filename="Desktop/theZoo-master/malwares/Binaries/Ransomware.Locky/Locky"
    cmd ="cuckoo submit "+filename
    output=subprocess.check_output(cmd,universal_newlines=True ,shell=True)
    string=output.split("#")
    file_name="/opt/cuckoo/storage/analysis/"+string[1].rstrip()+"/reports/report.json"
    with open(filename,'r') as f:
        f1 = f.read()
    print(f1)

